# alerts
Проект детектирования аномальных изменений данных о работе приложения и отправке оповещений в чат-бот с использованием Airflow

## Задача 

База в Clickhouse пополняется в режиме реального времени данными об активности пользователей в приложении (просмотр ленты новостей и отправка сообщений). Необходимо реализовать алгоритм, который каждые 15 минут будет оценивать основные показатели и определять, допустимы ли изменения этих показателей.

### Подробнее о данных

Данные об активности в ленте содержатся в таблице feed_actions со следующими полями:

|user_id|post_id|action|time               |gender|age|country|city            |os     |source |exp_group|
|-------|-------|------|-------------------|------|---|-------|----------------|-------|-------|---------|
|123767 |2040   |view  |29/06/24 20:06     |1     |21 |Russia |Samara          |Android|organic|1        |
|129655 |2116   |like  |29/06/24 20:06     |0     |26 |Russia |Saint Petersburg|iOS    |organic|4        |

Данные об активности в мессенджере содержатся в таблице message_actions со следующими полями:

|user_id|receiver_id|time  |source             |exp_group|gender|age    |country         |city   |os     |
|-------|-----------|------|-------------------|---------|------|-------|----------------|-------|-------|
|3829   |121735     |20/08/24 15:20|ads                |2        |1     |42     |Russia          |Moscow |iOS    |
|12802  |129537     |20/08/24 15:20|ads                |3        |1     |14     |Russia          |Gelendzhik|iOS

### Определение допустимых значений для метрик

По характеру поведения показателей активности пользователей на исторических данных можно определить границы допустимых значений для каждой метрики.

Основные метрики для оценки работы ленты новостей - это количество просмотров (views), количество лайков (likes) и конверсия из просмотров в лайки (CTR).

Визуализация недельных (графики в первой строке) и дневных (во второй строке) колебаний метрик views, likes, CTR в SUPERSET:

![лента-новостей](https://github.com/user-attachments/assets/1f4146cc-dbc2-4270-89e0-05e1bd870445)
